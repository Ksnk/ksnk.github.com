<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Расчет манипулятора</title>
    <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<svg fill="currentColor" style="display: none" xmlns="http://www.w3.org/2000/svg">
    <symbol id="icon-rollup" viewBox="0 0 16 16">
        <g fill="#fff">
            <path d="M7.5,13 C5 13,3 11,3 8.5 3 8.3,3 8.2,3 8 L1,8 1 8.2,1 8.3,1 8.5 1 12.1,3.9 15,7.5 15 11.1 15,14 12.1,14 8.5 C14 5.1,11.4 2.3,8 2 L8,4 C10.2 4.3,12 6.2,12 8.5 C12 11,10 13,7.5 13 L7.5,13 Z M4,3 L8,6 L8,0 L4,3 L4,3 Z"/>
        </g>
    </symbol>
    <symbol id="icon-calc" viewBox="0 0 16 16">
        <g fill="#000000">
            <path d="M3,1 L3,4 L13,4 L13,1 Z M3,0 L13,0 C13.5 0,14 0.4,14 1 L14,15 C14 15.6,13.6 16,13 16 L3,16 C2.5 16,2 15.6,2 15 L2,1 C2 0.4,2.4 0,3 0 Z M4,6 L4,8 L6,8 L6,6 Z M7,6 L7,8 L9,8 L9,6 Z M10,6 L10,8 L12,8 L12,6 Z M4,9 L4,11 L6,11 L6,9 Z M7,9 L7,11 L9,11 L9,9 Z M10,9 L10,11 L12,11 L12,9 Z M4,12 L4,14 L6,14 L6,12 Z M7,12 L7,14 L9,14 L9,12 Z M10,12 L10,14 L12,14 L12,12 Z"/>
        </g>
    </symbol>
    <symbol id="icon-pinit" viewBox="0 0 16 16">
        <g fill="#000000">
            <path d="M9,13.9 C11.5 13.5,13.5 11.5,13.9 9 L11,9 L11,7 L13.9,7 C13.5 4.5,11.5 2.5,9 2.1 L9,5 L7,5 L7,2.1 C4.5 2.5,2.5 4.5,2.1 7 L5,7 L5,9 L2.1,9 C2.5 11.5,4.5 13.5,7 13.9 L7,11 L9,11 Z M8,16 C3.6 16,0 12.4,0 8 C0 3.6,3.6 0,8 0 C12.4 0,16 3.6,16 8 C16 12.4,12.4 16,8 16 Z"/>
            <path stroke-width="1" fill="none" stroke="red" d="M2,2 A8 8 0 0 1 16 16"></path>
        </g>
    </symbol>
    <symbol id="icon-copy" viewBox="0 0 16 16">
        <g fill="#000000">
            <path d="M3,2 C2.4 2,2 2.5,2 3 L2,9 C2 9.6,2.5 10,3 10 L3,10 L3,12 L3,12 C1.3 12,0 10.7,0 9 L0,3 C0 1.3,1.3 0,3 0 L9,0 C10.7 0,12 1.3,12 3 C11.7 3,11.3 3,11 3 L10,3 L10,3 C10 2.4,9.5 2,9 2 Z M7,4 L13,4 C14.7 4,16 5.3,16 7 L16,13 C16 14.7,14.7 16,13 16 L7,16 C5.3 16,4 14.7,4 13 L4,7 C4 5.3,5.3 4,7 4 Z M7,6 C6.4 6,6 6.5,6 7 L6,13 C6 13.6,6.5 14,7 14 L13,14 C13.6 14,14 13.5,14 13 L14,7 C14 6.4,13.5 6,13 6 Z"
            />
        </g>
    </symbol>
    <symbol id="icon-paste" viewBox="0 0 16 16">
        <g fill="#000000">
            <path d="M2,1 L10,1 L10,6 L14,6 L14,16 L10,16 L2,16 L2,1 L2,1 Z M11,1 L14.1,5 L11,5 L11,1 L11,1 Z M3,8 L3,9 L13,9 L13,8 L3,8 Z M3,6 L3,7 L9,7 L9,6 L3,6 Z M3,4 L3,5 L9,5 L9,4 L3,4 Z M3,2 L3,3 L9,3 L9,2 L3,2 Z M3,14 L3,15 L13,15 L13,14 L3,14 Z M3,12 L3,13 L13,13 L13,12 L3,12 Z M3,10 L3,11 L13,11 L13,10 L3,10 Z" />
        </g>
    </symbol>
    <symbol id="icon-cross" viewBox="0 0 18 18">
        <g stroke-width="3" stroke="black">
            <path d='M2,2 L16,16 M2,16 L16,2'></path>
        </g>
    </symbol>
    <symbol id="icon-pencil" viewBox="0 0 18 18">
         <path stroke-width="1" stroke="black" fill="none" d="M3.4,11.3 L0.8,16.8 L7,14.4 L17.5,4.4 L13.6,1.5 L3.4,11.3 L7,14.4 M12.1,2.3 L15.5,5.9"/>
    </symbol>
    <symbol id="icon-move" viewBox="0 0 18 18">
        <g fill="#000000">
            <path d="M1,9 L2.5,10.5 L6,7 L9,10 L5.5,13.5 L7,15 L1,15 Z M15,7 L13.5,5.5 L10,9 L7,6 L10.5,2.5 L9,1 L15,1 Z"/>
        </g>
    </symbol>
</svg>

<div id="mapwrapper" style="z-index:100;">
    <table style="table-layout:fixed;width:100%;">
        <col/>
        <col width="50"/>
        <col width="300"/>
        <tr>
            <td colspan="2" style="text-align: center;">
                <div id="map">
                    <canvas height="660" id="canvas" width="660"></canvas>
                    <span class="pressHold left0"
                          data-handle="rotate,pointA,1"><svg class="svgicon "><use
                            xlink:href="#icon-rollup"/></svg></span>
                    <span class="pressHold left1"
                          data-handle="rotate,pointA,-1"><svg class="svgicon mirrorY"><use
                            xlink:href="#icon-rollup"/></svg></span>
                    <span class="pressHold right1"
                          data-handle="rotate,pointB,1"><svg class="svgicon "><use
                            xlink:href="#icon-rollup"/></svg></span>
                    <span class="pressHold right0"
                          data-handle="rotate,pointB,-1"><svg class="svgicon mirrorY"><use
                            xlink:href="#icon-rollup"/></svg></span>
                </div>
            </td>
            <td valign="top">
                <div class="tab">
                    <button class="tablinks active" data-handle="tab,0">Настройки</button>
                    <button class="tablinks" data-handle="tab,1">Программа</button>
                </div>
                <div class="tabcontent active">
                    <fieldset>
                        <legend>Текущее состояние</legend>
                        <label class="text"> ось А: <input data-handle="submitdraw,grad" name="pointA.2"> </label><br>
                        <label class="text"> ось Б: <input data-handle="submitdraw,grad" name="pointB.2"> </label><br>
                        <label class="text">X: <input data-handle="submitdraw" disabled="disabled" name="finC.0">
                        </label><br>
                        <label class="text">Y: <input data-handle="submitdraw" disabled="disabled" name="finC.1">
                        </label><br>
                        <button data-handle="letsfly">W</button>
                    </fieldset>
                    <fieldset>
                        <legend>Слои карты</legend>
                        <label><input data-handle="submitdraw" name="mapcolor[]" type="checkbox" value="1"> 00</label>&nbsp;
                        <label><input data-handle="submitdraw" name="mapcolor[]" type="checkbox" value="2"> 01</label>&nbsp;
                        <label><input data-handle="submitdraw" name="mapcolor[]" type="checkbox" value="4"> 10</label>&nbsp;
                        <label><input data-handle="submitdraw" name="mapcolor[]" type="checkbox" value="8"> 11</label>
                        <label><input data-handle="submitdraw" name="mapauto" type="checkbox" value="1">auto</label>
                    </fieldset>
                    <br>Расчет маршрута
                    <span data-handle='["copyjson","#forclipboard",["startA","fin_A","Obstacles", "finXY"]]'>
                        <svg class="svgicon">
                            <use xlink:href="#icon-copy"/>
                        </svg>
                    </span>
                    <div class="forpaste">
                    <span>
                        <svg class="svgicon">
                            <use xlink:href="#icon-paste"/>
                        </svg>
                    </span>
                        <input type="text"
                               data-handle='["pastejson","#forclipboard",["startA","fin_A", "Obstacles","finXY"]]'
                               id="forclipboard">
                    </div>
                    <br>
                    <fieldset>
                        <legend>Начало</legend>
                        <label class="text"> ось А: <input data-handle="submitdraw,grad" name="startA.0"> </label>
                        <span data-handle="pin, angle, startA">
                            <svg class="svgicon">
                                <use xlink:href="#icon-pinit"/>
                            </svg>
                        </span><br>
                        <label class="text"> ось Б: <input data-handle="submitdraw,grad" name="startA.1"> </label>
                    </fieldset>
                    <fieldset>
                        <legend>Финиш</legend>
                        <label class="text">ось А: <input data-handle="submitdraw,grad" name="fin_A.0"> </label>
                        <span title="Установить с экрана"
                              data-handle='[["pin", "angle", "fin_A"],["pin", "cooord", "finXY"]]'>
                            <svg class="svgicon">
                                <use xlink:href="#icon-pinit"/>
                            </svg>
                        </span><br>
                        <label class="text">ось Б: <input data-handle="submitdraw,grad" name="fin_A.1"> </label>
                        <label class="text">x: <input data-handle="submitdraw" name="finXY.0"> </label> <br>
                        <label class="text">y: <input data-handle="submitdraw" name="finXY.1"> </label>
                        <span title="Расчитать маршрут" data-handle="calc, coord, finXY">
                            <svg class="svgicon">
                                <use xlink:href="#icon-calc"/>
                            </svg>
                        </span>
                    </fieldset>
                    <fieldset>
                        <legend>Препятствия</legend>
                        <button class="painting" title="Рисовать" data-handle="paint">
                            <svg class="svgicon">
                                <use xlink:href="#icon-pencil"/>
                            </svg>
                        </button>&nbsp;
                        <button class="painting" title="Убрать" data-handle="clearpaint">
                            <svg class="svgicon">
                                <use xlink:href="#icon-cross"/>
                            </svg>
                        </button>&nbsp;
                        <button class="painting" title="Двигать" data-handle="moving">
                            <svg class="svgicon">
                                <use xlink:href="#icon-move"/>
                            </svg>
                        </button>&nbsp;
                    </fieldset>
                </div>
                <div class="tabcontent ">
                    <table id="programm">
                        <tr>
                            <th><span data-handle='["copyjson","#fc2",["trace"]]'><svg class="svgicon"><use
                                    xlink:href="#icon-copy"/></svg></span>
                                <div class="forpaste">
                                    <span>
                                        <svg class="svgicon">
                                            <use xlink:href="#icon-paste"/>
                                        </svg>
                                    </span>
                                    <input type="text" data-handle='["pastejson","#fc2",["trace"]]' id="fc2">
                                </div>
                            </th>
                            <th></th>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>

                </div>
            </td>
        </tr>
    </table>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js" type="text/javascript"></script>
<script src="draw.js" type="text/javascript"></script>
<script src="handle.js" type="text/javascript"></script>

</body>
</html>